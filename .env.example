# ============================================
# INDIE MARKETPLACE - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# For Docker: docker compose --env-file .env up -d

# ============================================
# DATABASE (PostgreSQL)
# ============================================
POSTGRES_USER=indie
POSTGRES_PASSWORD=CHANGE_ME_GENERATE_SECURE_PASSWORD
POSTGRES_DB=indie_marketplace

# Connection string (used by services)
DATABASE_URL=postgresql://indie:CHANGE_ME@localhost:5432/indie_marketplace
# For Docker internal use:
# DATABASE_URL=postgresql://indie:CHANGE_ME@postgres:5432/indie_marketplace

# ============================================
# REDIS (Classifier Queue)
# ============================================
REDIS_PASSWORD=

# ============================================
# MEILISEARCH (Full-text Search - Optional)
# ============================================
MEILI_ENV=development
MEILI_MASTER_KEY=CHANGE_ME_GENERATE_SECURE_KEY

# ============================================
# CLASSIFIER SERVICE
# ============================================
CLASSIFIER_WORKER_COUNT=4
CLASSIFIER_BATCH_SIZE=10
CLASSIFIER_CONFIDENCE_THRESHOLD=0.80

# ============================================
# SCRAPER SERVICE
# ============================================
SCRAPER_USER_AGENT="IndieMarketBot/1.0 (+https://indiemarket.com/bot)"
SCRAPER_REQUEST_DELAY_MS=1000
SCRAPER_MAX_CONCURRENCY=3
# Set to true for one-shot mode (run once and exit)
SCRAPER_RUN_ONCE=false

# ============================================
# WEB APPLICATION
# ============================================
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# CRON JOBS
# ============================================
# Secret for authenticating cron requests
# Generate: openssl rand -base64 32
CRON_SECRET=CHANGE_ME_GENERATE_WITH_OPENSSL

# Run sync immediately when cron container starts
CRON_RUN_ON_STARTUP=false

# ============================================
# TIMEZONE
# ============================================
TZ=Europe/Paris

# ============================================
# SUPABASE (if used instead of local PostgreSQL)
# ============================================
# NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
# NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
# SUPABASE_SERVICE_ROLE_KEY=xxx
